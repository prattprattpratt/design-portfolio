<!DOCTYPE html>
<html>

<head>
    <title>Chris Pratt's Design Portfolio</title>
    <link rel="stylesheet" type="text/css" href="portfolio.css">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100" rel="stylesheet">
</head>

<body>
    <div class="main-container">
        <div class="portfolio-item current">
            <h2 class="portfolio-nav-title">
                <span class="portfolio-nav-title-letter">l</span>
                <span class="portfolio-nav-title-letter">o</span>
                <span class="portfolio-nav-title-letter">n</span>
                <span class="portfolio-nav-title-letter green-text">d</span>
                <span class="portfolio-nav-title-letter green-text">o</span>
                <span class="portfolio-nav-title-letter">n</span>
                <span class="portfolio-nav-title-letter">_</span>
                <span class="portfolio-nav-title-letter green-text">a</span>
                <span class="portfolio-nav-title-letter green-text">n</span>
                <span class="portfolio-nav-title-letter green-text">i</span>
                <span class="portfolio-nav-title-letter green-text">m</span>
                <span class="portfolio-nav-title-letter green-text">a</span>
                <span class="portfolio-nav-title-letter green-text">t</span>
                <span class="portfolio-nav-title-letter green-text">i</span>
                <span class="portfolio-nav-title-letter green-text">o</span>
                <span class="portfolio-nav-title-letter green-text">n</span>
            </h2>
            <div class="portfolio-item-content">
                <img class="portfolio-item-image" src="london_animation.gif" />
            </div>
        </div>
        <div class="portfolio-item next">
            <h2 class="portfolio-nav-title">bankbonus.co</h2>
            <div class="portfolio-item-content">
                <img class="portfolio-item-image" />
            </div>
        </div>
        <div class="portfolio-item next">
            <h2 class="portfolio-nav-title">neighbor</h2>
            <div class="portfolio-item-content">
                <img class="portfolio-item-image" />
            </div>
        </div>
        <div class="portfolio-item next">
            <h2 class="portfolio-nav-title">byu_history</h2>
            <div class="portfolio-item-content image-mask">
                <img id="history-moving-image" class="portfolio-item-image" src="history1.png" />
            </div>
        </div>
    </div>
    <div className="svg-container">
        <?xml version="1.0" encoding="UTF-8"?>
        <div class="lamp">
            <svg width="326px" height="390px" viewBox="0 0 326 390" version="1.1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink">
                <!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch -->
                <title>Artboard</title>
                <desc>Created with Sketch.</desc>
                <defs></defs>
                <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <path d="M298.798906,244 C256.239337,110.780453 231.660508,41.6573268 225.062419,36.6306227 C215.165285,29.0905665 114.225929,28.6983568 103.056114,36.6306227 C95.6095714,41.9187999 67.9242,111.041926 20,244"
                        id="Line-3" stroke="#979797" stroke-linecap="square"></path>
                    <ellipse id="Oval" stroke="#979797" cx="159.5" cy="248" rx="139.5" ry="24"></ellipse>
                    <path d="M107.697368,226.5 C122.493454,242.028622 139.081173,249.792933 157.460526,249.792933 C175.839879,249.792933 192.427598,242.028622 207.223684,226.5"
                        id="Line-4" stroke="#979797" stroke-linecap="square"></path>
                    <path d="M207.5,228.368243 L207.5,336.631757" id="Line-5" stroke="#979797" stroke-linecap="square"></path>
                    <polygon id="Line-6" stroke="#979797" stroke-linecap="square" points="201.315175 337.227865 213.092457 337.227865 217 356 197.031165 356"></polygon>
                </g>
            </svg>
        </div>
        <?xml version="1.0" encoding="UTF-8"?>
        <div class="down-arrow">
            <svg id="down-arrow" width="367px" height="355px" viewBox="0 0 367 355" version="1.1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink">
                <!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch -->
                <title>Artboard</title>
                <desc>Created with Sketch.</desc>
                <defs></defs>
                <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="square">
                    <path d="M184.25,48.5 L184.25,297.5" id="Line" stroke="#979797"></path>
                    <path d="M184.5,297.5 L113.5,217.5" id="Line-2" stroke="#979797"></path>
                    <path d="M255.5,297.5 L184.5,217.5" id="Line-2" stroke="#979797" transform="translate(220.000000, 257.500000) scale(-1, 1) translate(-220.000000, -257.500000) "></path>
                </g>
            </svg>
        </div>
        <?xml version="1.0" encoding="UTF-8"?>
        <div class="up-arrow">
            <svg id="up-arrow" width="143px" height="250px" viewBox="0 0 143 250" version="1.1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink">
                <!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch -->
                <title>down_arrow</title>
                <desc>Created with Sketch.</desc>
                <defs></defs>
                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="down_arrow" transform="translate(71.500000, 125.000000) scale(1, -1) translate(-71.500000, -125.000000) "
                        stroke="#979797">
                        <path d="M71.25,0.5 L71.25,249.5" id="Line"></path>
                        <path d="M71.5,249.5 L0.5,169.5" id="Line-2"></path>
                        <path d="M142.5,249.5 L71.5,169.5" id="Line-2" transform="translate(107.000000, 209.500000) scale(-1, 1) translate(-107.000000, -209.500000) "></path>
                    </g>
                </g>
            </svg>
        </div>
    </div>
</body>

<script>
    let upArrowVisible = false;
    let downArrowVisible = true;

    const navTitleLetters = document.getElementsByClassName('portfolio-nav-title-letter');    
    const lamp = document.getElementsByClassName('lamp')[0];
    const downArrow = document.getElementById('down-arrow');
    const upArrow = document.getElementById('up-arrow');

    function animateLetters(letter) {
        return function () {
            const currentColor = letter.style.color;
            const colorsInOrder = ['', 'rgb(251, 77, 61)', 'rgb(3, 206, 164)', 'rgb(254, 198, 1)', 'rgb(222, 297, 227)', 'rgb(247, 23, 53)', 'rgb(64, 249, 155)'];
            const nextColor = colorsInOrder[(colorsInOrder.indexOf(currentColor) + 1) % 7];
            letter.style.color = nextColor;
        }
    }

    function toggleInvertColors() {
        return function () {
            console.log('toggling');
            const mainContainer = document.getElementsByClassName('main-container')[0];
            const currentColor = mainContainer.style.backgroundColor;
            console.log('currentColor is ' + currentColor);
            if (!mainContainer.classList.contains('invert')) {
                mainContainer.classList.add('invert');
            } else {
                mainContainer.classList.remove('invert');
            }
        }
    }

    function toggleLampStringLength(length) {
        return function () {
            const string = document.getElementById('Line-5');
            string.style.transform = length === 'long' ? 'scaleY(1.4)' : 'scale(1)';

            const handle = document.getElementById('Line-6');
            handle.style.transform = length === 'long' ? 'translateY(60px)' : 'translateY(0)';
        }
    }

    function toggleArrowSize(size, event) {
        return function () {
            
        }
    }

    function scrollPortolioItems(event) {
            const activeItem = document.getElementsByClassName('current')[0];
            if (['ArrowDown', 'ArrowRight'].includes(event.key) && activeItem.nextElementSibling) {
                activeItem.classList.remove('current');
                activeItem.classList.add('last');
                activeItem.nextElementSibling.classList.remove('next');
                activeItem.nextElementSibling.classList.add('current');
            } else if ( ['ArrowUp', 'ArrowLeft'].includes(event.key) && activeItem.previousElementSibling) {
                activeItem.classList.remove('current');
                activeItem.classList.add('next');
                activeItem.previousElementSibling.classList.remove('last');
                activeItem.previousElementSibling.classList.add('current');
            }

            if (event.target.id === 'down-arrow') {
                activeItem.classList.remove('current');
                activeItem.classList.add('last');
                activeItem.nextElementSibling.classList.remove('next');
                activeItem.nextElementSibling.classList.add('current');
            } else if (event.target.id === 'up-arrow') {
                activeItem.classList.remove('current');
                activeItem.classList.add('next');
                activeItem.previousElementSibling.classList.remove('last');
                activeItem.previousElementSibling.classList.add('current');
            }

            toggleArrowVisibility();
    }

    function toggleArrowVisibility() {
        const activeItem = document.getElementsByClassName('current')[0];

        if (!activeItem.previousElementSibling) {
            upArrowVisible = false;
            upArrow.style.display = 'none';
        } else {
            upArrowVisible = true;
            upArrow.style.display = 'block';
        }
        if (!activeItem.nextElementSibling) {
            downArrowVisible = false;
            downArrow.style.display = 'none';
        } else {
            downArrowVisible = true;
            downArrow.style.display = 'block';
        }
    }

    function moveImagesWithMouse(e) {
        const x = Math.sign(e.clientX - (window.innerWidth / 2));
        const y = Math.sign(e.clientY - (window.innerHeight / 2));
        const historyImage = document.getElementById('history-moving-image');

        historyImage.style.transform = `translate(${-25 * x}px, ${-25 * y}px)`;
    }

    Array.from(navTitleLetters).forEach(letter => { letter.addEventListener('click', animateLetters(letter)) });
    lamp.addEventListener('click', toggleInvertColors());
    lamp.addEventListener('mousedown', toggleLampStringLength('long'));
    lamp.addEventListener('mouseup', toggleLampStringLength('short'));
    downArrow.addEventListener('click', (event) => scrollPortolioItems(event));
    downArrow.addEventListener('mousedown', (event) => toggleArrowSize('big', event));
    downArrow.addEventListener('mouseup', (event) => toggleArrowSize('small', event));
    upArrow.addEventListener('click', (event) => scrollPortolioItems(event));
    upArrow.addEventListener('mousedown', (event) => toggleArrowSize('big', event));
    upArrow.addEventListener('mouseup', (event) => toggleArrowSize('small', event));
    document.addEventListener('keydown', (event) => scrollPortolioItems(event));
    document.addEventListener('DOMContentLoaded', toggleArrowVisibility);
    document.addEventListener('mousemove', moveImagesWithMouse);
</script>

</html>